#+Title: Teoría de categorías y cálculo lambda
#+Author: Mario Román García
#+beamer_header: \institute{Grado en Ingeniería Informática y Matemáticas - Universidad de Granada} 

* Header                                                                                    :ignore:
#+Options: H:2
#+Language: es

*** Beamer                                                                                :ignore:
#+latex_class: beamer
#+latex_class_options: [usenames,dvipsnames,8pt,mathserif,spanish]
#+latex_cmd: xelatex
#+latex_header: \usepackage[spanish]{babel}
#+beamer_theme: metropolis [background=light,sectionpage=none,numbering=none,progressbar=none,block=fill]

*** Show notes on second screen                                                           :ignore:
#+beamer_header: \usepackage{pgfpages}
#+beamer_header: \setbeameroption{hide notes}
#+beamer_header: %\setbeameroption{show notes on second screen=right}
#+beamer_header: \setbeamertemplate{note page}{\pagecolor{yellow!5}\insertnote}

**** Bug in pgfpages                                                                     :ignore:
# Hackish way to correct a bug in pgfpages https://tex.stackexchange.com/a/306662/64938
#+beamer_header: \makeatletter 
#+beamer_header: \renewcommand{\@makefnmark}{}
#+beamer_header: \def\beamer@framenotesbegin{% at beginning of slide
#+beamer_header:      \usebeamercolor[fg]{normal text}
#+beamer_header:       \gdef\beamer@noteitems{}% 
#+beamer_header:       \gdef\beamer@notes{}% 
#+beamer_header: }
#+beamer_header: \makeatother

#+beamer_header: \usepackage[backend=bibtex,natbib=true]{biblatex}
#+beamer_header: \addbibresource{../Bibliography.bib}

#+latex_header: \usepackage{tikz}
#+latex_header: \usepackage{tikz-cd}
#+latex_header: \usetikzlibrary{shapes,fit,tikzmark}

#+beamer_header: \usepackage{amsthm}
#+beamer_header: \usepackage{amsmath}

*** Table of contents                                                                     :ignore:
#+beamer_header: \setcounter{tocdepth}{1}
#+beamer_header: \setbeamertemplate{section in toc}[sections numbered]

*** Fonts                                                                                 :ignore:
#+beamer_header: \usefonttheme{professionalfonts}
#+beamer_header: \usepackage{palatino}
#+beamer_header: \setmonofont{Fira Mono}

*** Beamer colors                                                                         :ignore:
#+beamer_header: \definecolor{accent}{HTML}{c6474b}
#+beamer_header: \colorlet{darkaccent}{accent!70!black}
#+beamer_header: \definecolor{foreground}{RGB}{0, 0, 0}
#+beamer_header: \definecolor{background}{RGB}{255, 255, 255}

#+beamer_header: \setbeamercolor{normal text}{fg=foreground, bg=background}
#+beamer_header: \setbeamercolor{alerted text}{fg=darkaccent, bg=background}
#+beamer_header: \setbeamercolor{example text}{fg=foreground, bg=background}
#+beamer_header: \setbeamercolor{frametitle}{fg=background, bg=accent}
#+beamer_header: \setbeamercolor{headtitle}{fg=background!70!accent,bg=accent!90!foreground}
#+beamer_header: \setbeamercolor{headnav}{fg=background,bg=accent!90!foreground}
#+beamer_header: \setbeamercolor{section in head/foot}{fg=background,bg=accent}
*** Colors                                                                                :ignore:
#+latex_header: \definecolor{ugrColor}{HTML}{c6474b} % Title
#+latex_header: \definecolor{ugrColor2}{HTML}{c6474b} % Sections
#+latex_header: \definecolor{redPRL}{HTML}{ad2231}
#+latex_header: \definecolor{bluePRL}{HTML}{07608f}
#+latex_header: \definecolor{greenPRL}{HTML}{078f60}

#+latex_header: \colorlet{myred}{redPRL}
#+latex_header: \colorlet{myblue}{bluePRL}
#+latex_header: \newcommand{\red}[1]{{\color{myred}{{#1}}}}
#+latex_header: \newcommand{\blue}[1]{{\color{myblue}{{#1}}}}
#+latex_header: \newcommand{\ctypes}[1]{\color{bluePRL}{#1}}
#+latex_header: \newcommand{\cterms}[1]{\color{redPRL}{\texttt{#1}}}
*** Minted                                                                                :ignore:
#+latex_header_extra: \usepackage{minted} \usemintedstyle{colorful}
#+latex_header_extra: \setminted{fontsize=\small}
#+latex_header_extra: \setminted[haskell]{linenos=false,fontsize=\footnotesize}
#+latex_header_extra: \renewcommand{\theFancyVerbLine}{\sffamily\textcolor[rgb]{0.5,0.5,1.0}{\oldstylenums{\arabic{FancyVerbLine}}}}
*** Multimedia                                                                            :ignore:
#+beamer_header: \usepackage{multimedia}
* Cálculo lambda
** Cálculo lambda: definición
:PROPERTIES:
:BEAMER_OPT: fragile
:END:
footfullcite:church32 footfullcite:barendregt84

El cálculo lambda es un sistema formal dado por ecuaciones sobre
/términos lambda/. Abstracción y aplicación son
nociones primitivas.
\[\mathsf{Expr} := \left\{\begin{array}{ll} 
x, & \mbox{variables, de un conjunto numerable,} \\
\mathsf{Expr}\ \mathsf{Expr}, & \mbox{aplicación de funciones,} \\
\lambda x. \mathsf{Expr}, & \mbox{abstracción sobre una variable.}
\end{array}
\right.\]
Consideramos

 - \alpha-equivalencia, invariancia a renombramientos $(\lambda x.M[x]) \equiv (\lambda y.M[y])$;
 - \beta-reducciones, aplicación de funciones $(\lambda x. M)\ N \longrightarrow_{\beta} M_{[N/x]}$;
 - \eta-reducciones, extensionalidad $(\lambda x.f\ x) \equiv f$.

\note[item]{Las variables son intercambiables.}
\note[item]{Aplicamos funciones sustituyendo.}
\note[item]{Y reducimos términos que sólo hacen una aplicación.}
** Cálculo lambda: lenguaje de programación
:PROPERTIES:
:BEAMER_OPT: fragile
:END:

footfullcite:pollack95 footfullcite:kashima00

*** Church-Rosser                                                                          :BMCOL:
:PROPERTIES:
:BEAMER_col: 0.5
:END:

Buscamos *formas normales* invariantes a reducciones. Existen
términos que divergen como $\Omega = (\lambda x.(x x))(\lambda x.(x x))$.

#+ATTR_LATEX: :options [Church-Rosser]
#+BEGIN_theorem
La reducción es confluente.
#+END_theorem
\[\begin{tikzcd}[column sep=small,ampersand replacement=\&]
\&  M \drar[two heads]\dlar[two heads] \&\\
N \drar[dashed,two heads] \&\& P \dlar[dashed,two heads] \\
\& Z \&
\end{tikzcd}\]

Si existe la forma normal, es única.

\note[item]{Estas propiedades hacen del cálculo lambda un lenguaje de programación útil.}

*** Derecha                                                                                :BMCOL:
:PROPERTIES:
:BEAMER_col: 0.5
:END:

Hay expresiones que se reducirán o no dependiendo del orden de
evaluación, como
$(\lambda x.\lambda y.y)\ \Omega\ (\lambda x.x)$.

#+ATTR_LATEX: :options [Evaluación a izquierda]
#+BEGIN_theorem
Si existe una forma normal del término lambda, la estrategia que
reduce a cada paso la aplicación más a la izquierda la encuentra.
#+END_theorem

La reducción da una forma de cálculo *Turing-completa*.

** Mikrokosmos: implementación
:PROPERTIES:
:BEAMER_OPT: fragile
:END:

footfullcite:leijen2001 footfullcite:debruijn81

Usamos Haskell para escribir un intérprete de cálculo lambda. Los
algoritmos inductivos y puros se traducen directamente. Usamos
la librería de combinadores monádicos ~parsec~.
#+beamer: \\[-20pt]
#+BEGIN_SRC haskell
-- | Substitutes an index for a lambda expression
subs :: Integer -> Exp -> Exp -> Exp
subs n p (Lambda e) = Lambda (subs (n+1) (incrementFreeVars 0 p) e)
subs n p (App f g)  = App (subs n p f) (subs n p g)
subs n p (Var m)
  | n == m    = p         -- The lambda is replaced directly  
  | n <  m    = Var (m-1) -- A more exterior lambda decreases a number
  | otherwise = Var m     -- An unrelated variable remains untouched
#+END_SRC

Usamos *índices de DeBruijn*, una representación abstracta 
interna del ámbito de una variable. La expresión,
\[ \red{\lambda\tikzmark{2} y}.\ \tikzmark{3}y\ 
(\blue{\lambda\tikzmark{1} z}.\ \tikzmark{0}y\ 
\tikzmark{4}z) \begin{tikzpicture}[remember picture, overlay, bend right=45, -latex, redPRL]
\draw ([yshift=2ex]pic cs:0) to ([yshift=2ex]pic cs:1);
\draw ([yshift=2ex]pic cs:1) to ([yshift=2ex]pic cs:2);
\draw ([yshift=2ex]pic cs:3) to ([yshift=2ex]pic cs:2);
\end{tikzpicture} \begin{tikzpicture}[remember picture, overlay, bend left=45, -latex, bluePRL]
\draw ([yshift=-1ex]pic cs:4) to ([yshift=-1ex]pic cs:1);
\end{tikzpicture}\]
se reescribe como $\red{\lambda}\ (1\ \blue{\lambda}\ (2\ 1))$.
** Mikrokosmos: intérprete
#+attr_latex: width=\textwidth
[[../images/mikrosession_slide.png]]

** Mikrokosmos: SKI
* Mikrokosmos
** Implementación
** Interacción
** Uso
** Entorno de programación
** Programando en el cálculo lambda sin tipos
** Programando en el cálculo lambda simplemente tipado
* Categorías cartesianas
** Cálculo lambda con tipos
** Categorías cartesianas
** Isomorfismo de Curry-Howard
** Argumentos diagonales
* Conclusiones
** Conclusiones
*** Conclusiones
:PROPERTIES:
:END:
¡Muchas gracias!
* Local variables                                                                           :ignore:
# Local Variables:
# org-latex-pdf-process: ("xelatex --shell-escape -interaction nonstopmode %f" "bibtex %b" "xelatex --shell-escape -interaction nonstopmode %f")
# org-latex-packages-alist: nil
# org-latex-default-packages-alist: (("T1" "fontenc" t) ("" "fixltx2e" nil) ("" "graphicx" t) ("" "grffile" t) ("" "longtable" nil) ("" "wrapfig" nil) ("" "rotating" nil) ("normalem" "ulem" t) ("" "amsmath" t) ("" "textcomp" t) ("" "amssymb" t) ("" "capt-of" nil))
# End:
